\usetikzlibrary{calc}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{angles,quotes} % for pic
\usetikzlibrary{arrows.meta} % for arrow size
\usetikzlibrary{bending} % for arrow head angle
\usetikzlibrary{decorations.pathmorphing} % for decorate random steps
\tikzset{>=latex} % for LaTeX arrow head
\usetikzlibrary{arrows}
\tikzstyle{arrow}=[draw, -latex]
\tikzset{>=latex} % for LaTeX arrow head
\NewDocumentCommand{\RSload}{m m O{} O{above,col4} m m O{3} O{90} O{0.2}}{
    % #1: angle rotation du repère de la figure
    % #2: Couleur des fleches
    % #3: Label de la charge
    % #4: options du node pour le label 
    % #5: starting node 
    % #6: finishing node 
    % #7: Longeur des fleches
    % #8: Orientation des fleches
    % #9: Espace entre les fleches
    \begin{scope}[
        rotate=#1, % rotation de la figure d'un angle donné        
        transform shape,
        every arrow/.style={dblarwR={#2}{1pt}{1pt}} 
    ]
        % Draw all arrows along the horizontal axis
        \path[
        postaction={decorate,decoration={markings,
        mark=between positions 0.0 and 1.0+#9 step #9 with {\draw [every arrow] (0,0mm) --+ (#8:-#7em);}}},
        postaction={decorate,decoration={markings,
        mark=at position 0.5 with {\node at (0,-#7em) [#4,transform shape=false] {#3};}}},
        thin]
          (#6) -- (#5);
    \end{scope}
}

\NewDocumentCommand{\RSfix}{m m m O{0.5} O{0.15} O{col5} O{} O{above} }{
    % #1: angle rotation du repère de la figure
    % #2: Largeur du bati 
    % #3: Noeud (coordonnées) du centre
    % #4: options pour les hachures du bati (taille)
    % #5: options pour les hachures du bati (densité)
    % #6: Couleur du mur
    % #7: Label au centre du noeud
    % #8: Options du noeud précédent
    \begin{scope}[rotate=#1, transform shape]
        \pgfmathsetmacro{\halfSize}{#2*0.5} 
        \draw[col5,decorate,decoration={border,segment length=#5em, amplitude=#4em,angle=45},thin] 
                               ($(#3)+(\halfSize,0)$) -- ($(#3)+(-\halfSize,0)$); 
        \draw[SolidStyle#6,thick] ($(#3)+(\halfSize,0)$) --node[#8,col5, transform shape=false]{#7} ($(#3)+(-\halfSize,0)$);
    \end{scope}
}

\NewDocumentCommand{\RSplan}{m m m O{0.5} O{0.15} O{col5} O{} O{above} }{
    % #1: angle rotation du repère de la figure
    % #2: Largeur du bati
    % #3: Noeud (coordonnées) du centre
    % #4: options pour les hachures du bati (taille)
    % #5: options pour les hachures du bati (densité)
    % #6: Couleur du mur
    % #7: Label au centre du noeud
    % #8: Options du noeud précédent
    \begin{scope}[rotate=#1, transform shape]
        \pgfmathsetmacro{\halfSize}{#2*0.5} 
        \draw[col5,decorate,decoration={border,segment length=#5em, amplitude=#4em,angle=45},thin]
                               ($(#3)+(\halfSize,-0.25*#4em)$) -- ($(#3)+(-\halfSize,-0.25*#4em)$);
        \draw[SolidStyle#6,thick] ($(#3)+(\halfSize,0)$) --node[#8,col5, transform shape=false]{#7}  ($(#3)+(-\halfSize,0)$);
        \draw[col5,thick] ($(#3)+(\halfSize,-0.25*#4em)$) -- ($(#3)+(-\halfSize,-0.25*#4em)$);
    \end{scope}
}

\NewDocumentCommand{\RSpin}{mmmO{}O{above}}{
    % #1: angle rotation du repère de la figure
    % #2: Largeur du bati
    % #3: Noeud (coordonnées) du centre
    % #4: Label du centre
    % #5: Options liées au label
    \pgfmathsetmacro{\rel}{#2*0.15}
    \begin{scope}[rotate=#1,transform shape]
        \coordinate (basefixe) at ($(#3)-(0,0.5*#2)$);
        \pgfmathsetmacro{\halfSize}{#2*0.5}
        \draw[thin,draw=col5,fill=white] (#3) --+
                                          ($(0.5*#2,-0.5*#2)$) --+
                                          ($(-0.5*#2,-0.5*#2)$) -- cycle;
        \draw[thin,draw=col5,fill=white]            (#3) circle[radius=0.1*#2] node[#5,transform shape=false] {#4};
        \draw[col5,
              decorate,decoration={border,segment length=0.2em},
                                          segment amplitude=0.5em,
                                          segment angle=45, thin]
              ($(basefixe)+(\halfSize,0)$) -- ($(basefixe)+(-\halfSize,0)$); 
        \draw[thin,col5] ($(basefixe)+(\halfSize,0)$) -- ($(basefixe)+(-\halfSize,0)$);
    \end{scope}
}

\NewDocumentCommand{\RSrol}{mmmO{}O{above}}{
    % #1: angle rotation du repère de la figure
    % #2: Largeur du bati
    % #3: Noeud (coordonnées) du centre
    % #4: Label du centre
    % #5: Options liées au label
    \pgfmathsetmacro{\rel}{#2*0.18}
    \begin{scope}[rotate=#1,transform shape]
        \coordinate (basefixe) at ($(#3)-(0,0.5*#2+0.5*\rel)$);
        \pgfmathsetmacro{\halfSize}{#2*0.5}
        \draw[thin,draw=col5,fill=white] (#3) --+
                                          ($(0.5*#2,-0.5*#2)$) --+
                                          ($(-0.5*#2,-0.5*#2)$) -- cycle;
        \draw[thin,draw=col5,fill=white]            (#3) circle[radius=0.1*#2] node[#5,transform shape=false] {#4};
        \draw[col5,thick,
              decorate,decoration={border,segment length=0.2em},
                                          segment amplitude=0.5em,
                                          segment angle=45, thin]
              ($(basefixe)+(\halfSize,0)$) -- ($(basefixe)+(-\halfSize,0)$); 
        \draw[thin,col5,postaction={decorate,decoration={markings,
        mark=between positions 0.0 and 1.0 step 0.2 with {\draw[thin] (0,-0.25*\rel) circle[radius=0.15*\rel];}}}
        ] ($(basefixe)+(\halfSize,0)$) -- ($(basefixe)+(-\halfSize,0)$);
    \end{scope}
}

\tikzstyle{SolidStyle}=[line width=3pt]
\NewDocumentCommand{\RSSolideExt}{mO{SolidStyle}}{
    \tikzstyle{SolidStyle#1}+=[SolidStyle,#2]
}

